<!DOCTYPE html>
<html>
	<head>
        <title>DOMO</title>
        <link rel="stylesheet" type="text/css" href="static/style/analyses.css">
        <link rel="icon" type="image/png" href="static/img/home.png">
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    </head>
    <body>
        <div class="element title">
			<a href="/" class="goBackLink">&#60;- Retour au menu</a>
			<h2>Projet domotique - Analyses</h2>
		</div>
        <div class="element">
			<table id="items">
				<thead>
					<tr>
						{% for key, value in items.items() %}
							<th>{{key}}</th>
						{% endfor %}
					</tr>
				</thead>
				<tbody>
					{% for i in range(nb_line) %}
					<tr>
						{% for key, value in items.items() %}
							<td>
								{% if value[i] %}
									<form method='POST'><button type=submit name='item' value='{{key}} {{value[i]}}' class="select-item">{{value[i]}}</button></form>
								{% endif %}	
							</td>
						{% endfor %}
					</tr>
					{% endfor %}
					<tr>
						<td colspan=4>
							<form id="form-all" method='POST'><button type=submit name='item' value='all' class="select-all-item">Heatmap</button></form>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="element" id="charts">
			<div id="graphLastObjectFreqContainer">
				<div id="graphLastObjectFreq">
					<script>
						var None = undefined,
						graphLastFreq = {{plotLastFreq | safe}};
						var graphLastObjectFreqHTML = document.getElementById('graphLastObjectFreqContainer');
						if (graphLastFreq==undefined)
						{
						
							graphLastObjectFreqHTML.style.display='None';
						}
						else
						{
							graphLastFreq['config']={displayModeBar: false};
							Plotly.plot('graphLastObjectFreq', graphLastFreq);
							var title = document.createElement("title");
							title.innerHTML += 'Frequence of pre-activation :';
							graphLastObjectFreqHTML.prepend(title);
	
						}
					</script>
				</div>				
			</div>
			
			<div id="graphPredictionContainer">
				<div id="graphPrediction">
					<script>
						var None = undefined,
						graphPrediction= {{plotPredition | safe}};
						var graphPredictionHTML = document.getElementById('graphPredictionContainer');
						if (graphLastFreq==undefined)
						{
							
							graphPredictionHTML.style.display='None';
						}
						else
						{
							graphPrediction['config']={displayModeBar: false};
							Plotly.plot('graphPrediction', graphPrediction);
							var title = document.createElement("title");
							title.innerHTML += 'State prediction over time:';
							graphPredictionHTML.prepend(title);
	
						}
					</script>
				</div>
			</div>
			
			<div id="graphFullPeriodContainer">
				<div id="graphFullPeriod">
					<script>
						var None = undefined,
						graphFullPeriod= {{plotFullPeriod | safe}};
						var graphFullPeriodHTML = document.getElementById('graphFullPeriodContainer');
						if (graphFullPeriod==undefined)
						{
							
							graphFullPeriodHTML.style.display='None';
						}
						else
						{
							graphFullPeriod['config']={displayModeBar: false};
							Plotly.plot('graphFullPeriod', graphFullPeriod);
							var title = document.createElement("title");
							title.innerHTML += 'Period length: ';
							graphFullPeriodHTML.prepend(title);
	
						}
					</script>
				</div>
			</div>

			<div id="heatMapContainer">
				<div id="heatMap">
					<script>
						var None = undefined,
						heatMap= {{plotHeatMap | safe}};
						var heatMapHTML = document.getElementById('heatMapContainer');
						if (heatMap==undefined)
						{
							
							heatMapHTML.style.display='None';
						}
						else
						{
							heatMap['config']={displayModeBar: false};
							Plotly.plot('heatMap', heatMap);
							var title = document.createElement("title");
							title.innerHTML += 'Correlation between all the objects';
							heatMapHTML.prepend(title);
	
	
						}
					</script>
				</div>
			</div>
		</div>
		<script type=text/javascript src="../static/js/lib/jquery.js"></script>
		<script type=text/javascript src="../static/js/logs.js"></script>
    </body>
</html>
